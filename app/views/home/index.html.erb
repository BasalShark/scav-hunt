<div data-controller="scoreboard"
     data-scoreboard-update-url-value="<%= home_index_path(format: :json) %>"
     data-scoreboard-update-interval-value="5000">
  <div class="mb-4">
    <h2>Time Remaining:</h2>
    <div data-scoreboard-target="timer" class="fs-1 fw-bold"></div>
  </div>

  <table class="table">
    <thead>
      <tr>
        <th>Rank</th>
        <th>Team</th>
        <th>Score</th>
      </tr>
    </thead>
    <% # TODO: The link currently gets replaced on scoreboard update. Fix that. %>
    <tbody data-scoreboard-target="tableBody">
      <% @teams.each_with_index do |team, index| %>
        <tr>
          <td><%= index + 1 %></td>
          <td>
            <% if can? :manage, :scoring %>
              <%= link_to team.name, scoring_score_path(team) %>
            <% else %>
              <%= team.name %>
            <% end %>
          </td>
          <td><%= team.results.sum(&:total_points) %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
